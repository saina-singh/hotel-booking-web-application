<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- ✅ Flash messages -->
  <div class="container mt-3">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ 'success' if category == 'success' else 'warning' }} alert-dismissible fade show"
      role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>
  {% block head %}{% endblock %}
</head>

<body>

  <!-- NAVBAR WRAPPER -->
  <header class="border-bottom bg-white">
    <div class="container py-3">
      <div class="d-flex align-items-center">

        <!-- LEFT: Logo -->
        <a href="{{ url_for('index') }}" class="fw-bold fs-4 text-dark text-decoration-none">
          World Hotels
        </a>

        <!-- CENTER: Navigation -->
        <nav class="mx-auto">
          <div class="d-flex align-items-center nav-center">
            <a href="{{ url_for('index') }}">Discover</a>
            <a href="{{ url_for('hotels') }}">Hotels</a>
            <a href="{{ url_for('gallery') }}">Gallery</a>
            <a href="{{ url_for('deals') }}">Deals</a>
            <a href="{{ url_for('about') }}">About</a>
            <a href="{{ url_for('contact') }}">Contact</a>
          </div>
        </nav>

        <!-- RIGHT: Profile / Auth -->
        <div class="d-flex align-items-center gap-3">
          {% if session.get('loggedin') %}
          <a href="{{ url_for('profile') }}" class="profile-circle p-0 overflow-hidden" title="Profile"
            style="width:42px;height:42px;display:flex;align-items:center;justify-content:center;">
            {% if session.get('profile_image') %}
            <img src="{{ url_for('static', filename='uploads/profiles/' ~ session.get('profile_image')) }}"
              alt="Profile" style="width:100%;height:100%;object-fit:cover;">
            {% else %}
            {{ (session.get('email','U'))[0].upper() }}
            {% endif %}
          </a>
          <a class="btn btn-dark btn-sm px-3" href="{{ url_for('logout') }}">Logout</a>
          {% else %}
          <a class="btn btn-outline-dark btn-sm px-3" href="{{ url_for('register') }}">Register</a>
          <a class="btn btn-dark btn-sm px-3" href="{{ url_for('login') }}">Login</a>
          {% endif %}
        </div>

      </div>
    </div>
  </header>

  <!-- Banner image ONLY on these pages -->
  {% if endpoint in ['index', 'login', 'register'] %}
  <div class="container my-4">
    <img src="{{ url_for('static', filename='images/hotel_banner.png') }}" class="w-100 rounded-4"
      style="height: 520px; object-fit: cover; object-position: right center;" alt="Hotel Banner">
  </div>
  {% endif %}

  <!-- CTA ONLY when NOT logged in -->
  {% if not session.get('loggedin') %}
  <div class="container my-5 text-center p-5 bg-dark text-white rounded">
    <h3 class="fw-bold">Ready to plan your next trip?</h3>
    <p class="mt-2">Sign up now and get exclusive deals and discounts.</p>
    <a href="{{ url_for('register') }}" class="btn btn-light mt-3">Register Now</a>
  </div>
  {% endif %}

  {% block body %}{% endblock %}

  <hr>
  <footer class="text-center text-muted py-3">
    © 2025 WorldHotels.com — All Rights Reserved
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>