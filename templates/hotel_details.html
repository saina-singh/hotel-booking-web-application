{% extends 'base.html' %}
{% block head %}
<title>{{ hotel.hotel_name }} • Rooms</title>
{% endblock %}

{% block body %}

<!-- ===== HOTEL IMAGE BANNER ===== -->
<div class="container my-4">
  <img src="{{ url_for('static', filename=hotel.img) }}" class="w-100 rounded-4" style="height:420px; object-fit:cover;"
    alt="{{ hotel.hotel_name }}">
</div>

<div class="container my-4">

  <!-- Breadcrumb -->
  <div class="mb-3">
    <a href="{{ url_for('hotels') }}" class="text-decoration-none text-muted">Hotels</a>
    <span class="text-muted"> / </span>
    <span class="fw-semibold">{{ hotel.hotel_name }}</span>
  </div>

  <!-- Hotel title -->
  <div class="card shadow-sm mb-4">
    <div class="card-body p-3 p-md-4">
      <form method="get" class="row g-3 align-items-end">
        <div class="col-md-4">
          <label class="form-label fw-semibold">Pricing season</label>
          <select name="season" class="form-select" onchange="this.form.submit()">
            <option value="" {% if not request.args.get('season') %}selected{% endif %}>Auto (from check-in)</option>
            <option value="peak" {% if request.args.get('season')=='peak' %}selected{% endif %}>Peak season</option>
            <option value="off_peak" {% if request.args.get('season')=='off_peak' %}selected{% endif %}>Off-peak season
            </option>
          </select>
          <div class="text-muted small mt-1">Use this to preview prices instantly.</div>
        </div>

        <div class="col-md-4">
          <label class="form-label fw-semibold">Check-in date (optional)</label>
          <input type="date" name="checkin" value="{{ checkin or '' }}" class="form-control">
        </div>

        <div class="col-md-4 d-grid">
          <button class="btn btn-dark" type="submit">Update pricing</button>
        </div>
      </form>
    </div>
  </div>


  <!-- Rooms list -->
  <div class="row g-4">
    {% for r in rooms %}
    <div class="col-md-4">
      <div class="card shadow-sm h-100">

        <img src="{{ url_for('static', filename=r.img) }}" class="card-img-top" style="height:220px; object-fit:cover;"
          alt="{{ r.code }}">

        <div class="card-body d-flex flex-column">
          <h5 class="fw-bold mb-1">{{ r.code }}</h5>

          <div class="text-muted small mb-2">
            Max guests: {{ r.max_guests }} • Available: {{ r.rooms_count }}
          </div>

          <div class="mb-2 text-muted small">
            {{ r.features }}
          </div>

          <div class="mt-auto">
            <div class="fw-bold mb-2">
              From £{{ r.nightly_from_gbp }}/night
            </div>

            <a href="{{ url_for('room_details', hotel_id=hotel.hotel_id, room_code=r.code, checkin=checkin, season=request.args.get('season')) }}"
              class="btn btn-dark w-100">
              View Room
            </a>

          </div>
        </div>

      </div>
    </div>
    {% endfor %}
  </div>

</div>

{% endblock %}